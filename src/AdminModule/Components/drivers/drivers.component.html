<!-- Navbar -->
<div class="background">
 
    <div class="navbar">
        <div class="logo">Admin Dashboard</div>
        <div class="nav-links">
                <a href="agency" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;">Agencies</a>
                <a href="bus" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;" >Buses</a>
                <a href="admin-customer" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;">Customers</a>
                <a href="drivers" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;">Drivers</a>
                <a href="payments" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;">Payment</a>
                <a href="adminroutes" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;">Routes</a>
                <a href="admintrips" style="color: rgb(243, 237, 237); text-decoration: none; padding: 10px 15px;">Trips</a>
            <button class="logout-btn" (click)="logout()">Logout</button>
        </div>
    </div>
     
    <!-- Content Area -->
    <div class="content-container">
        <h1 style="text-align: center;">Manage Drivers</h1>
     
        <!-- Search by ID or Name Dropdown -->
        <div class="search-container">
            <select [(ngModel)]="searchType">
                <option value="id">Search by ID</option>
                <option value="name">Search by Name</option>
            </select>
            &nbsp;
            <input
                *ngIf="searchType === 'id'"
                type="number"
                placeholder="Enter Driver ID"
                [(ngModel)]="searchDriverId"
            />
            <input
                *ngIf="searchType === 'name'"
                type="text"
                placeholder="Enter Driver Name"
                [(ngModel)]="searchDriverName"
            />
            &nbsp;
            <button class="search-btn" (click)="searchDriver()">Search</button><br>
        </div>
     
         <!-- Add Driver Button -->
         &nbsp;
         <button class="add-driver-btn" (click)="isCreate()">Add Driver</button>
     
        <!-- Add Driver Form -->
        <div *ngIf="isTrue" class="card p-3af-1">
            <div>
                <br><h2 style="text-align: center;">Add New Driver</h2>
                <form #driverForm="ngForm" (ngSubmit)="saveNewDrivers()">
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input
                            type="text"
                            id="name"
                            name="name"
                            [(ngModel)]="newDriver.name"
                            required
                            #name="ngModel"
                        />
                        <div *ngIf="name.invalid && name.touched" class="error">
                            Name is required.
                        </div>
                    </div>
                    <div class="form-group">
                        <br><label for="licenseNumber">License Number:</label>
                        <input
                            type="text"
                            id="licenseNumber"
                            name="licenseNumber"
                            [(ngModel)]="newDriver.licenseNumber"
                            required
                            #licenseNumber="ngModel"
                        />
                        <div *ngIf="licenseNumber.invalid && licenseNumber.touched" class="error">
                            License Number is required.
                        </div>
                    </div>
                    <div class="form-group">
                        <br><label for="phone">Phone:</label>
                        <input
                            type="text"
                            id="phone"
                            name="phone"
                            [(ngModel)]="newDriver.phone"
                            required
                            #phone="ngModel"
                        />
                        <div *ngIf="phone.invalid && phone.touched" class="error">
                            Phone is required.
                        </div>
                    </div>
                    <br><button type="submit" class="btn btn-success">Save Driver</button>
                    &nbsp;
                    <button type="button" class="btn btn-secondary" (click)="isTrue = false">Cancel</button>
                </form>
            </div>
        </div>
     
      <!-- Edit Driver Form -->
      <div *ngIf="showEditDriverForm" class="card p-3ed-2">
        <h2 style="text-align: center;" >Edit Driver</h2>
        <form (ngSubmit)="updateDriver(editDriver, editDriver.driverId)" #editDriverForm="ngForm">
            <div>
                <label for="name">Name:</label>
                &nbsp;
                <input
                    type="text"
                    id="name"
                    name="name"
                    [(ngModel)]="editDriver.name"
                    required
                />
            </div>
            <div>
                <br><label for="licenseNumber">License Number:</label>
                &nbsp;
                <input
                    type="text"
                    id="licenseNumber"
                    name="licenseNumber"
                    [(ngModel)]="editDriver.licenseNumber"
                    required
                />
            </div>
            <div>
                <br><label for="phone">Phone:</label>
               
                &nbsp;
                <input
                    type="text"
                    id="phone"
                    name="phone"
                    [(ngModel)]="editDriver.phone"
                    required
                />
            </div>
            <br><button type="submit" class="btn btn-success">Update Driver</button>
            &nbsp;
            <button type="button" class="btn btn-secondary" (click)="showEditDriverForm = false">Cancel</button>
        </form>
    </div>
     
     
        <!-- Drivers Table -->
        <table class="driver-table">
            <thead>
                <tr>
                    <th>Driver ID</th>
                    <th>Name</th>
                    <th>License Number</th>
                    <th>Phone</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let driver of drivers">
                    <td>{{ driver.driverId }}</td>
                    <td>{{ driver.name }}</td>
                    <td>{{ driver.licenseNumber }}</td>
                    <td>{{ driver.phone }}</td>
                    <td>
                        <button class="btn btn-success" (click)="editDriverDetails(driver)">Edit</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    </div>